---
title: "BIO593 Assignment 3"
author: "Kevin Wong, Danielle Jordan, Roxy Roja"
date: '2018-03-26'
output: html_document
---

```{r Intro, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction of the data

This document uses data with life-history, population, and ecological examples. This data can be cited here: http://dx.doi.org/10.6084/m9.figshare.1314459. We will provide an indepth analysis containing plots that visually represent trends in the data and statistical analyses to accurately describe the trends. We will outline 3 major questions with this dataset.

## Introduction of the problem

Our analyses investigate how differential plot types can influences rodent species weight, sex ratios, hindfoot length, and abundances. The following markdown will couple illustrative figures with statistical analyses to determine if plot types affect rodent species. 

```{r installpackages, echo=TRUE, results=FALSE, message=FALSE, warning=FALSE}
#install.packages(c("dbplyr","RSQLite","tidyverse"))
library(dbplyr)
library(RSQLite)
library(tidyverse)
```

## Loading Data and Installing packages
```{r loaddata, echo=TRUE, cache=FALSE, results=FALSE, message=FALSE, warning=FALSE}
download.file("https://ndownloader.figshare.com/files/2292169" , "data/portal_data_joined.csv") 
surveys <- read.csv("../data/portal_data_joined.csv", header=TRUE, na.strings = c("","NA")) #uploading csv
```

## Question 1
Does plot type affect the relationship between hindfoot length and sex of rodent species? 

``` {r Q1, echo = FALSE}

```

## Question 2
Does plot type affect the relationship between weight and sex of rodent species? 
```{r Q2, echo = FALSE}

```

## Question 3
How does rodent species abundance change in each plot type? 
```{r Q3, echo = FALSE, results = TRUE}
surveys_specplot<- surveys %>% 
  select(taxa, plot_type, species) %>%
  filter(taxa == "Rodent") %>% 
  filter(!is.na(taxa), !is.na(plot_type), !is.na(species)) %>%
  group_by(plot_type, species) %>%
  tally()

ggplot(data = surveys_specplot, aes(x = factor(-n), y = n, fill = species)) +
  geom_bar(stat="identity") +
  ylab("Counts") + xlab("Species") + 
  guides(fill = guide_legend(ncol = 3)) +
  facet_wrap(~ plot_type, scales = "free_x", drop = TRUE) +
  scale_fill_discrete(name="Species") +
  theme_bw(base_size=7) + theme(panel.border = element_blank(), panel.grid.major = element_blank(),
                     panel.grid.minor = element_blank(), axis.line = element_line(colour = "black")) +
  theme(
    axis.text.x = element_blank(),
    axis.ticks.x = element_blank()) +
  theme(legend.position=c(0.85,0.25)) 

```
